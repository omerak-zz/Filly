<!DOCTYPE html>
<html>
  <head>
    <script src="./Filly.js"></script>
  </head>
  <body>
    <filly-component title="title" check="test">
      some kind of children
    </filly-component>

    <!-- 1 -->
    <template id="filly-component">
      <div class="root">
        <div class="title">
          {{this.props.title}}
          <div class="rounded-triangle"></div>
        </div>
        <div class="content">{{this.props.children}}</div>
        <div>
          {{{this.data.list.map((item, idx) => {
            return `
              <filly-item
                check="{{this.props.check}}"
                onclick="this.getRootNode().host.onClick(event, ${idx})"
              >item ${item}</filly-item>
            `
          })}}}
        </div>
        <br>
        <div>
          {{{this.state.selecteds.map((item) => `<p>item ${item}</p>`)}}}
        </div>
      </div>
    </template>
    <script>
      class FillyComponent extends Filly {
        static get observedAttributes() {
          return ['check'];
        }

        template = '#filly-component'

        constructor(props) {
          super(props);
    
          this.data = {
            list: [1,2,3,5]
          };
          this.state = {
            selecteds: []
          };
        }

        onClick(e, idx) {
          this.state.selecteds.push(idx); 
          this.render();
        }
      }
      window.customElements.define('filly-component', FillyComponent);
    </script>
    <!-- 1 -->

    <!-- 2 -->
    <template id="filly-item">
      <div class="root">
        <div class="content">{{this.props.children}}</div>
      </div>
    </template>
    <script>
      class FillyItem extends Filly {
        static get observedAttributes() {
          return ['check'];
        }

        template = '#filly-item'
      }
      window.customElements.define('filly-item', FillyItem);
    </script>
    <!-- 2 -->
  </body>
</html>